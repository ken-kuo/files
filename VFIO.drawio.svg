<?xml version="1.0" encoding="UTF-8"?>
<!-- Do not edit this file with editors other than diagrams.net -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1241px" height="868px" viewBox="-0.5 -0.5 1241 868" content="&lt;mxfile host=&quot;app.diagrams.net&quot; modified=&quot;2022-09-24T08:02:33.071Z&quot; agent=&quot;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/105.0.0.0 Safari/537.36&quot; etag=&quot;EMr-nlGtcwvDRuvUiikW&quot; version=&quot;20.3.3&quot; type=&quot;google&quot;&gt;&lt;diagram id=&quot;iHGhPvlXnuffIIIrRmfL&quot; name=&quot;Page-1&quot;&gt;7R1rb9u29tcI2L1ACr0tffSra3eTtVjabb1fAsZmbLay6MlyHvv1IylSL9KSHEtylggIEOn4iKR43oeHlGZNN48/R2C7vsJLGGimvnzUrJlmmoZteeQfhTwlEMdxEsAqQkuOlAGu0d+QA3UO3aMl3BUQY4yDGG2LwAUOQ7iICzAQRfihiHaHg2KvW7DiPeoZ4HoBAiih/YGW8TqBeuYog3+AaLUWPRuun/yyAQKZN7xbgyV+yIGsuWZNI4zj5GrzOIUBnTwxL8lz7w/8mg4sgmHc5IH9KFj7v++DlfVxPJrPl2P0y5cL3so9CPb8he/vECaQn1YBvgXBf/jY4ycxIbsHtAlASO4mdziMr/kvBrkHAVqF5HpBRgQjAriHUYzIXI75DzHeEuhijYLlJXjCezruXQwWP8TdZI0j9DdpFgS8TfJzFHO2MN0CxjV9koB1Ao3gjuB8FpNhlEBX4LGAeAl2MQcscBCA7Q7dpq+xAdEKhRMcx3jDkeS5FhNH3hA+5kB87n+GeAPj6Img8F8vRpwPuCAY4v4hY6sUts6x1IhLEOCcvEqbTnv7jXA+CFfkDY7qTtWbpRd7AwEhZQhiOMH7cLnLcxi5yL1oBmJ8dwQP2o7EhAhvNvubZYTI/O5uAkSpNdampjbW6c3NGoKlxJmEEDHjmAj/gFMcYMKCsxAnrIqCoAQS3BrAu/ggr+62YIHC1SXDmdkZ5Dc+ZRSEybN3AZPtNVouYUj5DMcgBglTUQ7aYhTGbE6dCfkjszzV3zmaQwY+JfdGdk/+KHoUT3FI3gUgxnKQcOwDpPOgYMZK0a7nUM4iRLwaMaTAUzFkgTeOZQRT4oNVhPfbgf790N8xz0x/YfNL1uhmQdU9ColJYRwwmKSWTFLqZAkbYco2wtRVHGDYr9wmGbJjNOiiE3SR3pg3DxsjNSu2oIz0/3/4vHzCt4/fZxb449vXxf/08YXhSxwgUTlAjHoJlUV4YDyLxBtCrABmNP1CST67MCS6WzLdLQWNA3ALg894h2KEaftRgluifR15i/yLwjWMUEZ2iZqNOeEYG6Qke4VPfJoJkn2QvC+aSj6zS4VfBg3QsgZwmxqjrjSAKbsjgwboXAN4DRV/ZxrAPqQByOxm8o9JI5TzLIPO9e/vP366uZ5/ufn46erqqzZ3NX+kTVx64U01b6TNHW081/yxNn+vTQhkmmtzbmsTT5uMczolftpC4wZvifCSJ/2J5s8Z2pS6v/MRbcizM/w3q3we1iiG12QYtO2HCGy7VEi+3ZAzO1NIslM6KKTOFZLhNTREnWkkSyJ7iBO5F+roFuPgzSqBzgTe8Lz+XBD1mOXUKNP6LBaVCD7kQdrJg1hNU/OO9aw8SJP+XkoexJUYcINCzAIh8iiZ8kHrVGsdpzE3niENr3QzZJIPXkYLXoZTSfWmyffOnAzvQNiTmBrhaORhpv7fXAiUs0s02CFhjk8vJmON+M0iZOHRis7xeCzEHiCRkskCJxImTdmFR1rhq9HbBSpgE8Ps+ywimmjevNSqQxsYewmUI89YHyPNmzDIVPPdXJRGhkkuTIHMcEjLZOzZ+71ZRXdKjHW08lMkfZRi4Ouny4FS+Q1Z3zMoP8NpSPbOtJ9M9mzRsZDzzcBF9fdm1UNnqsBw5OirX0dIsR49KIPulYEn59l6VQaKvP8S3qMFPLj4O2iB7rSA39Ax7k4LDFnXM2gB02io/TvTAjLZiRZI8h6JOlAFQIsIghiKOMjTiFB5Fgt/bBKScDWSICmiDREmLdYgynUzqJeIJrjgkjfca0TSOB/jtsCJagVkDgroDApIsdzXrwKSyR7ept5HiGN0h2B0cxvgxY83qxg6E3tLP7vfIS/7DWLfudhb5rn9DpnszLMImUQPhaedC7517vUXRQXSIPjdC7575hUYUyZ7mmwcpL8v6W+69N+d9A/Lr+eQfr+h1u9M+uVKn314S8PeYctJT7Jv6w0jvu5kfzTIfv+yb1vnXn2Uyc4KOrNYn1c4pInAXBnGBQGv4hSWVJR7tNBh7KSl5b9+vbzMFVCwuomxRfHGhjb2aCnExKTXtCaC4PgsFTnV/PcUMp4RZF5OMWJPiDZo8QRvVQwyKVOnle68b+PNaqpe85TpSRu1eUqzK+0llxAN2qv7wjH9zNrLlB3WH/ebVHnRa7ZQ8kaVQGcC7+g91keoKe9JVIXLFRR152RS1niFQxDMM2hpKSfDucRMfqn4fodx/MQLy8E+xgS0jjei7JzMY/T0J3+e3XyjN4Qc/Hb2mP9x9sTvvu83WzE0EC2UpBG2Cu+jBayiljiKCEQrWEVWEdTTeakkagQDEKN7WBhH+xST65yG/QSt7yew7WJ9v2s3VNHPO+rnX7SdwJI93SHHdZrhSEX6RW4wUB/4JHPBsMTRIwOc/aAfW44JX7Dj8Hw3QVj/WjdB6MUX4ibYcuDWK30yknwrUERNH/iI4j9FG+Q6R1Vylz1Eb06nqSgVr6WpsMrt0ZQ9Oo4i8JRD4Aona/kzZtvyUmfELHoHjmXk+aMW39cr0S2jCp1cJONt1Yuw32zcYTYNO6wXpU/E9o6ywU/rKIfQo6XQw3FLsYBqZ42lsPVGORp4dbGHc7Cgl/mb+ZreweGsUi6pNJ8UcaiYsDOHU3i8OdpjeoB0fmcXL86m8IEBWmYAVcTRKwO4sgUqbmyuSIMN1D+R+iNForpf6h86zXPIOPTDAYaqtKJfCyCX1W4XiCr9wfdsyfcciRqmKt9TeYyO+dpdT7m0U+V6DlqnUutYjRnypSS6HVci6rGJCjl78K/IfIpgqzZT4bS+QKrOU41Ka3KW5xebSEbKn+pABfhvlhUUSSv18ZZeP6zgOUVWsG3zndMrM7jWS2OG52XcxXW3GXcRu9Vn3J1+GMi1ygxUcimSV+qOfeyXxj596RKzKSuIiO/ciy+lL144rpNniFp82x2VGKiD5RT3wCGjQ3a+6+y8snZTFRa/+ghJfDVvyNC0Eiu5rZw62muCZiSrmfMatfSmmVHrtwrBbRpfCcHqfyVY7eMfKP2iuTjVyssbtjQ1ewVqcnFeyZFQHGtg+Qr5Tk+7P87U+EZ9f4bdu62pjDNzPEjoTlhHY5+R3cWMBaP9gl5IS4N6kV911oCujSb5c5r4d+r09OJdCDZQBpcvkrZM9689ZnaJdHVBz75NIdRi1LbS2kXVC7GPkzR7odyMkWe6e4MGoyZajlhTFSWKIxV47Q+2anQIL+Kgqo3iIBP0DjmieiaJG3Yk/dkzZ6X/Q4TiSjksDjhBP9MMbzZge+wMs2fOLGF/7amvWi9hCV6XEjaaKcf4qi747RuNh6hT+B5sUED9jinxmhE7mflX+NDUj6pwU48JltTOlFPxfZCT/GjrwClRgx/drh/tlJaNFDu5HJVba5r6a3ejLXlRu8aNzn8vM+9Ml+HJ5+9Sk9GSb33AdJa8bTaWCz6AvNdd7Qw/5L5O3WwIrPMvHz5e31x9mn29nNf30cjhrnIQpG8L1nV52Fuusu75bnJ+9Gmeb9MOU5+4sjsQEy205vV+z5zBQht1HS7h6R0W2qjrcIvCmy1Ywd3xU5g9WtfJPmzUTU1/+VbqOXKFdjHdLMrPP61nwPID9S9V0Untq9T1l7ikg7vWqruWeEPHuGtKo234nblr8hKbykvrcxfThf5O161ijlv37LosN737DCNE5oU6iwxYSdVD259KCelnbsZrWltyiEP6yXpbp29Ya2dt4xlrFM9d5C8wxQcY3EOqo9olv9jmVrsKYh+I5/rdejnS/TwrNcB3Sqx32uq/mjdfSGHaQX55bpFSm3ymWG1TTmZiVdovOCrVDbjl6LK9erWK1xqyDV1nG9xS+Y+rqKC3DZXnUq5Ae33pBnFmRKN0A/GZ6XIdjAA9zC1NNCQlJXdHLdzVhvZHB/L7kH6yAS5FrJoPJrIRklgiaBjNLvBmC+IbZQzNmuYI2zhq2OKxi3u5YZ+YWFC2qc4iDKFUB6HUIQt2OJRSKyTj+FCK3EaY5tsytRGB7foKLyHF+Ac=&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs><clipPath id="mx-clip-4-161-162-26-0"><rect x="4" y="161" width="162" height="26"/></clipPath><clipPath id="mx-clip-4-187-162-26-0"><rect x="4" y="187" width="162" height="26"/></clipPath><clipPath id="mx-clip-284-111-192-26-0"><rect x="284" y="111" width="192" height="26"/></clipPath><clipPath id="mx-clip-284-145-192-26-0"><rect x="284" y="145" width="192" height="26"/></clipPath><clipPath id="mx-clip-284-273-192-26-0"><rect x="284" y="273" width="192" height="26"/></clipPath><clipPath id="mx-clip-284-361-162-26-0"><rect x="284" y="361" width="162" height="26"/></clipPath><clipPath id="mx-clip-284-493-162-26-0"><rect x="284" y="493" width="162" height="26"/></clipPath><clipPath id="mx-clip-284-527-162-26-0"><rect x="284" y="527" width="162" height="26"/></clipPath><clipPath id="mx-clip-284-637-162-26-0"><rect x="284" y="637" width="162" height="26"/></clipPath><clipPath id="mx-clip-284-671-162-26-0"><rect x="284" y="671" width="162" height="26"/></clipPath><clipPath id="mx-clip-284-705-162-26-0"><rect x="284" y="705" width="162" height="26"/></clipPath><clipPath id="mx-clip-284-739-162-26-0"><rect x="284" y="739" width="162" height="26"/></clipPath><clipPath id="mx-clip-284-843-162-26-0"><rect x="284" y="843" width="162" height="26"/></clipPath><clipPath id="mx-clip-514-631-162-26-0"><rect x="514" y="631" width="162" height="26"/></clipPath><clipPath id="mx-clip-514-657-162-26-0"><rect x="514" y="657" width="162" height="26"/></clipPath><clipPath id="mx-clip-634-341-122-26-0"><rect x="634" y="341" width="122" height="26"/></clipPath><clipPath id="mx-clip-634-367-122-26-0"><rect x="634" y="367" width="122" height="26"/></clipPath><clipPath id="mx-clip-634-393-122-26-0"><rect x="634" y="393" width="122" height="26"/></clipPath><clipPath id="mx-clip-634-419-122-26-0"><rect x="634" y="419" width="122" height="26"/></clipPath><clipPath id="mx-clip-799-341-162-26-0"><rect x="799" y="341" width="162" height="26"/></clipPath><clipPath id="mx-clip-634-491-122-26-0"><rect x="634" y="491" width="122" height="26"/></clipPath><clipPath id="mx-clip-854-419-382-154-0"><rect x="854" y="419" width="382" height="154"/></clipPath><clipPath id="mx-clip-614-31-532-194-0"><rect x="614" y="31" width="532" height="194"/></clipPath><clipPath id="mx-clip-744-641-402-114-0"><rect x="744" y="641" width="402" height="114"/></clipPath></defs><g><path d="M 0 156 L 0 130 L 170 130 L 170 156" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 0 156 L 0 208 L 170 208 L 170 156" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 0 156 L 170 156" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" pointer-events="none" text-anchor="middle" font-size="12px"><text x="84.5" y="147.5">vfio (global)</text></g><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-4-161-162-26-0)" font-size="12px"><text x="5.5" y="173.5">iommu_drivers_list: list_head</text></g><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-4-187-162-26-0)" font-size="12px"><text x="5.5" y="199.5">group_list: list_head</text></g><path d="M 280 106 L 280 80 L 480 80 L 480 106" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 280 106 L 280 294 L 480 294 L 480 106" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 280 106 L 480 106" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" pointer-events="none" text-anchor="middle" font-size="12px"><text x="379.5" y="97.5">vfio_container </text></g><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-284-111-192-26-0)" font-size="12px"><text x="285.5" y="123.5">group_list: list_head</text></g><path d="M 280 136 L 480 136" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-284-145-192-26-0)" font-size="12px"><text x="285.5" y="157.5">iommu_driver: vfio_iommu_driver</text></g><path d="M 280 170 L 480 170" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 190px; height: 1px; padding-top: 181px; margin-left: 286px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 82px; overflow: hidden;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">iommu_data: void<br />VFIO_SET_IOMMU时指定，iommu_data为vfio_iommu_type1_open回传的vfio_iommu</div></div></div></foreignObject><text x="286" y="193" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">iommu_data: void...</text></switch></g><path d="M 280 264 L 480 264" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-284-273-192-26-0)" font-size="12px"><text x="285.5" y="285.5">noiommu: bool</text></g><path d="M 280 356 L 280 330 L 450 330 L 450 356" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 280 356 L 280 864 L 450 864 L 450 356" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 280 356 L 450 356" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" pointer-events="none" text-anchor="middle" font-size="12px"><text x="364.5" y="347.5">vfio_group</text></g><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-284-361-162-26-0)" font-size="12px"><text x="285.5" y="373.5">minor: int</text></g><path d="M 280 386 L 450 386" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 160px; height: 1px; padding-top: 397px; margin-left: 286px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 86px; overflow: hidden;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">iommu_group: iommu_group *<br />vfio_group对应的iommu group，如果是vfio pci，则从iommu group在iommu初始化时已创建<div><br /></div></div></div></div></foreignObject><text x="286" y="409" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">iommu_group: iommu_group *...</text></switch></g><path d="M 280 484 L 450 484" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-284-493-162-26-0)" font-size="12px"><text x="285.5" y="505.5">container: vfio_container *</text></g><path d="M 280 518 L 450 518" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-284-527-162-26-0)" font-size="12px"><text x="285.5" y="539.5">device_list: list_head</text></g><path d="M 280 552 L 450 552" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 160px; height: 1px; padding-top: 563px; margin-left: 286px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 64px; overflow: hidden;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">dev: device *<br />vfio_create_group调用device_create创建的char device<div><br /></div></div></div></div></foreignObject><text x="286" y="575" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">dev: device *...</text></switch></g><path d="M 280 628 L 450 628" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-284-637-162-26-0)" font-size="12px"><text x="285.5" y="649.5">nb: notifier_block</text></g><path d="M 280 662 L 450 662" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-284-671-162-26-0)" font-size="12px"><text x="285.5" y="683.5">vfio_next: list_head</text></g><path d="M 280 696 L 450 696" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-284-705-162-26-0)" font-size="12px"><text x="285.5" y="717.5">container_next: list_head</text></g><path d="M 280 730 L 450 730" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-284-739-162-26-0)" font-size="12px"><text x="285.5" y="751.5">unbound_list: list_head</text></g><path d="M 280 764 L 450 764" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 160px; height: 1px; padding-top: 775px; margin-left: 286px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 58px; overflow: hidden;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">bool: noiommu<br />iommu_group-&gt;iommu_data若为NULL，代表没有真正iommu硬件，noiommu会为1</div></div></div></foreignObject><text x="286" y="787" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">bool: noiommu...</text></switch></g><path d="M 280 834 L 450 834" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-284-843-162-26-0)" font-size="12px"><text x="285.5" y="855.5">kvm: kvm *</text></g><path d="M 280 119 L 260 119 L 260 713 L 273.63 713" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 278.88 713 L 271.88 716.5 L 273.63 713 L 271.88 709.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 510 626 L 510 600 L 680 600 L 680 626" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 510 626 L 510 678 L 680 678 L 680 626" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 510 626 L 680 626" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" pointer-events="none" text-anchor="middle" font-size="12px"><text x="594.5" y="617.5">vfio_group</text></g><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-514-631-162-26-0)" font-size="12px"><text x="515.5" y="643.5">container_next: list_head</text></g><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-514-657-162-26-0)" font-size="12px"><text x="515.5" y="669.5">vfio_next: list_head</text></g><path d="M 450 713 L 480 713 L 480 639 L 503.63 639" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 508.88 639 L 501.88 642.5 L 503.63 639 L 501.88 635.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 450 501 L 450 491 L 490 491 L 490 50 L 380 50 L 380 73.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 380 78.88 L 376.5 71.88 L 380 73.63 L 383.5 71.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 170 195 L 225 195 L 225 679 L 257 679 C 257 675.1 263 675.1 263 679 L 263 679 L 273.63 679" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 278.88 679 L 271.88 682.5 L 273.63 679 L 271.88 675.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 630 336 L 630 310 L 760 310 L 760 336" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 630 336 L 630 440 L 760 440 L 760 336" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 630 336 L 760 336" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" pointer-events="none" text-anchor="middle" font-size="12px"><text x="694.5" y="327.5">vfio_device </text></g><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-634-341-122-26-0)" font-size="12px"><text x="635.5" y="353.5">dev: device *</text></g><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-634-367-122-26-0)" font-size="12px"><text x="635.5" y="379.5">ops: vfio_device_ops</text></g><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-634-393-122-26-0)" font-size="12px"><text x="635.5" y="405.5">group: vfio_group</text></g><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-634-419-122-26-0)" font-size="12px"><text x="635.5" y="431.5">group_next: list_head</text></g><path d="M 795 336 L 795 310 L 965 310 L 965 336" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 795 336 L 795 362 L 965 362 L 965 336" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 795 336 L 965 336" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" pointer-events="none" text-anchor="middle" font-size="12px"><text x="879.5" y="327.5">pci_dev</text></g><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-799-341-162-26-0)" font-size="12px"><text x="800.5" y="353.5">dev: device</text></g><path d="M 760 349 L 780 349 L 775 349 L 788.63 349" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 793.88 349 L 786.88 352.5 L 788.63 349 L 786.88 345.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 760 375 L 805 375 L 805 491 L 843.63 491" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 848.88 491 L 841.88 494.5 L 843.63 491 L 841.88 487.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 630 401 L 540 401 L 540 310 L 493 310 C 493 306.1 487 306.1 487 310 L 487 310 L 365 310 L 365 323.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 365 328.88 L 361.5 321.88 L 365 323.63 L 368.5 321.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 450 525 L 540 525 L 540 427 L 623.63 427" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 628.88 427 L 621.88 430.5 L 623.63 427 L 621.88 423.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 630 486 L 630 460 L 760 460 L 760 486" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 630 486 L 630 512 L 760 512 L 760 486" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 630 486 L 760 486" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" pointer-events="none" text-anchor="middle" font-size="12px"><text x="694.5" y="477.5">vfio_device </text></g><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-634-491-122-26-0)" font-size="12px"><text x="635.5" y="503.5">group_next: list_head</text></g><path d="M 760 427 L 780 427 L 780 499 L 766.37 499" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 761.12 499 L 768.12 495.5 L 766.37 499 L 768.12 502.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 850 414 L 850 388 L 1240 388 L 1240 414" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 850 414 L 850 568 L 1240 568 L 1240 414" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 850 414 L 1240 414" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" pointer-events="none" text-anchor="middle" font-size="12px"><text x="1044.5" y="405.5">vfio_pci_ops</text></g><g fill="rgb(0, 0, 0)" font-family="Courier New" pointer-events="none" clip-path="url(#mx-clip-854-419-382-154-0)" font-size="12px"><text x="855.5" y="431.5">static const struct vfio_device_ops vfio_pci_ops = {</text><text x="855.5" y="445.5">    .name       = "vfio-pci",                       </text><text x="855.5" y="459.5">    .open       = vfio_pci_open,                    </text><text x="855.5" y="473.5">    .release    = vfio_pci_release,                 </text><text x="855.5" y="487.5">    .ioctl      = vfio_pci_ioctl,                   </text><text x="855.5" y="501.5">    .read       = vfio_pci_read,                    </text><text x="855.5" y="515.5">    .write      = vfio_pci_write,                   </text><text x="855.5" y="529.5">    .mmap       = vfio_pci_mmap,                    </text><text x="855.5" y="543.5">    .request    = vfio_pci_request,                 </text><text x="855.5" y="557.5">};                                                  </text></g><path d="M 610 26 L 610 0 L 1150 0 L 1150 26" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 610 26 L 610 220 L 1150 220 L 1150 26" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 610 26 L 1150 26" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" pointer-events="none" text-anchor="middle" font-size="12px"><text x="879.5" y="17.5">vfio_pci_ops</text></g><g fill="rgb(0, 0, 0)" font-family="Courier New" pointer-events="none" clip-path="url(#mx-clip-614-31-532-194-0)" font-size="12px"><text x="615.5" y="43.5">static const struct vfio_iommu_driver_ops vfio_iommu_driver_ops_type1 = {</text><text x="615.5" y="57.5">    .name           = "vfio-iommu-type1",</text><text x="615.5" y="71.5">    .owner          = THIS_MODULE,</text><text x="615.5" y="85.5">    .open           = vfio_iommu_type1_open,</text><text x="615.5" y="99.5">    .release        = vfio_iommu_type1_release,</text><text x="615.5" y="113.5">    .ioctl          = vfio_iommu_type1_ioctl,</text><text x="615.5" y="127.5">    .attach_group       = vfio_iommu_type1_attach_group,</text><text x="615.5" y="141.5">    .detach_group       = vfio_iommu_type1_detach_group,</text><text x="615.5" y="155.5">    .pin_pages      = vfio_iommu_type1_pin_pages,</text><text x="615.5" y="169.5">    .unpin_pages        = vfio_iommu_type1_unpin_pages,</text><text x="615.5" y="183.5">    .register_notifier  = vfio_iommu_type1_register_notifier,</text><text x="615.5" y="197.5">    .unregister_notifier    = vfio_iommu_type1_unregister_notifier,</text><text x="615.5" y="211.5">};</text></g><path d="M 480 153 L 487 153 C 487 149.1 493 149.1 493 153 L 493 153 L 545 153 L 545 18.5 L 602.01 18.48" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 607.26 18.48 L 600.26 21.98 L 602.01 18.48 L 600.26 14.98 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 87px; margin-left: 545px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; background-color: rgb(255, 255, 255); white-space: nowrap;">ops</div></div></div></foreignObject><text x="545" y="90" fill="rgb(0, 0, 0)" font-family="Courier New" font-size="11px" text-anchor="middle">ops</text></switch></g><path d="M 450 679 L 450 669 L 477 669 C 477 665.1 483 665.1 483 669 L 483 669 L 490 669 L 490 665 L 503.63 665" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 508.88 665 L 501.88 668.5 L 503.63 665 L 501.88 661.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 450 590 L 945 590 L 945 603.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 945 608.88 L 941.5 601.88 L 945 603.63 L 948.5 601.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 740 636 L 740 610 L 1150 610 L 1150 636" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 740 636 L 740 750 L 1150 750 L 1150 636" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 740 636 L 1150 636" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" pointer-events="none" text-anchor="middle" font-size="12px"><text x="944.5" y="627.5">vfio_pci_ops</text></g><g fill="rgb(0, 0, 0)" font-family="Courier New" pointer-events="none" clip-path="url(#mx-clip-744-641-402-114-0)" font-size="12px"><text x="745.5" y="653.5">static const struct file_operations vfio_group_fops = {</text><text x="745.5" y="667.5">    .owner      = THIS_MODULE,</text><text x="745.5" y="681.5">    .unlocked_ioctl = vfio_group_fops_unl_ioctl,</text><text x="745.5" y="695.5">    .compat_ioctl   = compat_ptr_ioctl,</text><text x="745.5" y="709.5">    .open       = vfio_group_fops_open,</text><text x="745.5" y="723.5">    .release    = vfio_group_fops_release,</text><text x="745.5" y="737.5">};</text></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg>